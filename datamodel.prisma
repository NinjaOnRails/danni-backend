type Video {
  id: ID! @id
  originId: String! @unique
  originTitle: String!
  originDescription: String
  originAuthor: String
  originPlatform: String! @default(value: "YouTube")
  originLanguage: String
  originThumbnailUrl: String
  originThumbnailUrlSd: String
  originTags: [Tag]!
  duration: Int
  language: Language
  addedBy: User! @relation(name: "VideoToUser")
  audio: [Audio]! @relation(name: "AudioToVideo", onDelete: CASCADE)
  comment: [Comment]! @relation(name: "CommentToVideo", onDelete: CASCADE)
  caption: [Caption]! @relation(name: "CaptionToVideo", onDelete: CASCADE)
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
}

type Audio {
  id: ID! @id
  source: String! @unique
  language: Language
  title: String!
  description: String
  duration: Int
  tags: [Tag]!
  defaultVolume: Int! @default(value: 0)
  startAt: Int! @default(value: 0)
  author: User @relation(name: "AudioToUser")
  video: Video @relation(name: "AudioToVideo")
  caption: Caption @relation(name: "AudioToCaption")
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
}

type Caption {
  id: ID! @id
  languageTag: String!
  xml: String!
  video: Video @relation(name: "CaptionToVideo")
  audio: [Audio]! @relation(name: "AudioToCaption")
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
}

type Tag {
  id: ID! @id
  text: String! @unique
  audio: [Audio]!
}

type User {
  id: ID! @id
  email: String! @unique
  password: String!
  name: String
  displayName: String! @unique
  resetToken: String
  resetTokenExpiry: Float
  permissions: [Permission] @scalarList(strategy: RELATION)
  video: [Video]! @relation(name: "VideoToUser", onDelete: SET_NULL)
  audio: [Audio]! @relation(name: "AudioToUser", onDelete: SET_NULL)
  comment: [Comment]! @relation(name: "CommentToUser", onDelete: SET_NULL)
  reply: [Reply]! @relation(name: "ReplyToUser", onDelete: SET_NULL)
}

type Comment {
  id: ID! @id
  video: Video! @relation(name: "CommentToVideo")
  author: User! @relation(name: "CommentToUser")
  reply: [Reply]! @relation(name: "ReplyToComment", onDelete: CASCADE)
  text: String!
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
}

type Reply {
  id: ID! @id
  comment: Comment! @relation(name: "ReplyToComment")
  author: User! @relation(name: "ReplyToUser")
  text: String!
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
}

enum Language {
  ENGLISH
  CZECH
  VIETNAMESE
  GERMAN
  SPANISH
  MANDARIN
  FRENCH
  ITALIAN
  PORTUGUESE
  RUSSIAN
  JAPANESE
  KOREAN
  HINDI
  ARABIC
  TELUGU
  TURKISH
  POLISH
  SWEDISH
  DUTCH
}

enum Permission {
  ADMIN
  USER
  VIDEOCREATE
  VIDEOUPDATE
  VIDEODELETE
  AUDIOCREATE
  AUDIOUPDATE
  AUDIODELETE
  COMMENTCREATE
  COMMENTCREATE
  COMMENTUPDATE
}
